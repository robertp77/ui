{"remainingRequest":"C:\\Users\\arobu\\finalproject\\ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\arobu\\finalproject\\ui\\src\\components\\TheMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\arobu\\finalproject\\ui\\src\\components\\TheMap.vue","mtime":1620822797502},{"path":"C:\\Users\\arobu\\finalproject\\ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\arobu\\finalproject\\ui\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\arobu\\finalproject\\ui\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\arobu\\finalproject\\ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\arobu\\finalproject\\ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyBMIGZyb20gJ2xlYWZsZXQnOw0KaW1wb3J0IHsgR2VvU2VhcmNoQ29udHJvbCwgT3BlblN0cmVldE1hcFByb3ZpZGVyIH0gZnJvbSAnbGVhZmxldC1nZW9zZWFyY2gnOw0KaW1wb3J0ICcuLi8uLi9ub2RlX21vZHVsZXMvbGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzJzsNCmltcG9ydCAnLi4vLi4vbm9kZV9tb2R1bGVzL2xlYWZsZXQtZ2Vvc2VhcmNoL2Rpc3QvZ2Vvc2VhcmNoLmNzcyc7DQppbXBvcnQgeyBsaW5rRGF0YVN0b3JlIH0gZnJvbSAnLi4vZGF0YS9MaW5rRGF0YVN0b3JlLmpzJw0KaW1wb3J0IGltYWdlIGZyb20gJy4vSW1hZ2VzL3Bpbi5wbmcnIA0KLy9pbXBvcnQgeyBnZXRKU09OIH0gZnJvbSAnLi9hcGlIZWxwZXInOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdUaGVNYXAnLA0KICAgIGRhdGEgKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgLy8gYmFja2luZyBkYXRhIGZvciBlZGl0cyB1c2luZyB2LW1vZGVsLCBubyBjb3B5IG5lZWRlZCBzaW5jZSBTdHJpbmdzIGFyZSBpbW11dGFibGUNCiAgICAgICAgICAgIGFsbExpbmtzOiBsaW5rRGF0YVN0b3JlLA0KICAgICAgICAgICAgbWFwOiAndGVzdCcsDQogICAgICAgICAgICBwaWNrdXBsb2M6J2luaXQnLA0KICAgICAgICAgICAgcmVxc3RhdHVzOiAncmVxdWVzdCByaWRlJywNCiAgICAgICAgICAgIHByb3ZpZGVyOiAndGVzdCcsDQogICAgICAgICAgICBzZWFyY2hDb250cm9sOiAndGVzdCcsDQogICAgICAgICAgICByZXFwaWNrdXBsb2M6J3Rlc3QnLA0KICAgICAgICAgICAgcmVxZHJvcG9mZmxvYzondGVzdCcsDQogICAgICAgICAgICB0aGVydDondGVzdCcsDQogICAgICAgICAgICBwaWNrdXBsYXQ6MCwNCiAgICAgICAgICAgIHBpY2t1cGxvbmc6MCwNCiAgICAgICAgICAgIGxhdDowLA0KICAgICAgICAgICAgbG9uZzowLA0KICAgICAgICAgICAgdXNlcmlkOiIiLA0KICAgICAgICAgICAgaXNwaWNrOiIiLA0KICAgICAgICAgICAgdGhlcG9wdXA6IiIsDQogICAgICAgICAgICB0aGVnaXZlcmlkZXBvcHVwczpbXSwNCiAgICAgICAgICAgIGNvc3Q6IiIsDQogICAgICAgICAgICByaWRlcmlkOiIiLA0KICAgICAgICAgICAgZW5yb3V0ZTpmYWxzZSwNCiAgICAgICAgICAgIHRoZWJ0bnM6W10sDQogICAgICAgICAgICBpbmRzOltdLA0KICAgICAgICAgICAgeWVzYnRuczpbXSwNCiAgICAgICAgICAgIG5vYnRuczpbXSwNCiAgICAgICAgICAgIGNvbnRhaW5lcnM6W10sDQogICAgICAgICAgICBnaXZpbmc6ZmFsc2UsDQogICAgICAgICAgICBva2J0bnM6W10sDQogICAgICAgICAgICBsb2dnZWRpbjpmYWxzZSwNCiAgICAgICAgICAgIGxvZ2dlZGluMjpmYWxzZSwNCiAgICAgICAgICAgIHJlcXVlc3RlZDpmYWxzZSwNCiAgICAgICAgICAgIHRoZXVzZXJpZDp7fSwNCiAgICAgICAgICAgIG90aGVycmVxc3RhdHVzOmZhbHNlLA0KICAgICAgICAgICAgc2NvcmU6MTUsDQogICAgICAgICAgICBpc2xvYWRpbmc6Jyhsb2FkaW5nIG1hcCknDQogICAgICAgICAgICAvLyBtYXkgYWxzbyBuZWVkIGEgY29weSBncm91cCBpbmZvcm1hdGlvbiBpZiB0aGVyZSBpcyBhbnkgY2hhbmNlIGl0IG1pZ2h0IGJlIGNoYW5nZWQgaW50ZXJhY3RpdmVseQ0KICAgICAgICB9Ow0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAvLyBlbWl0IGV2ZW50IHRoYXQgc2lnbmFscyBhIG5ldyBsaW5rIGlzIHJlYWR5IHRvIGJlIGFkZGVkDQogICAgICAgIC8vIE5PVEUsIGVycm9yIGNoZWNraW5nIGlzIGRvbmUgaW4gdGhlIGNoaWxkIGNvbXBvbmVudA0KICAgICAgICBhc3luYyBnZXRyaWRlcygpew0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL2dldExpbmtzJykvLz9sYXQ9Jyt0aGlzLmxhdCsnJmxvbmc9Jyt0aGlzLmxvbmcpOw0KICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZ2V0cmlkZXJsYXQoaWQpew0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL2dldHJpZGVybGF0P2lkPScraWQpOw0KICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZ2V0cmlkZXJsb25nKGlkKXsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vc2FmZS1yaXZlci0xNjQwOS5oZXJva3VhcHAuY29tL2FwaS9nZXRyaWRlcmxvbmc/aWQ9JytpZCk7DQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOw0KICAgICAgICB9LA0KICAgICAgICB3b3JrKHZhbHVlKXsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlLmxvY2F0aW9uKQ0KICAgICAgICAgICAgdGhpcy5waWNrdXBsb2Muc2V0TGF0TG5nKFt2YWx1ZS5sb2NhdGlvbi55LHZhbHVlLmxvY2F0aW9uLnhdKQ0KICAgICAgICB9LA0KICAgICAgICB1cGRhdGVQb2x5KG9sZExhdExuZyl7DQogICAgICAgICAgICB0aGlzLnRoZXJ0LnJlbW92ZSgpDQogICAgICAgICAgICB0aGlzLnRoZXJ0PUwucG9seWdvbihbDQogICAgICAgICAgICAgICAgW3RoaXMucGlja3VwbGF0LCB0aGlzLnBpY2t1cGxvbmddLA0KICAgICAgICAgICAgICAgIFtvbGRMYXRMbmcubGF0bG5nLmxhdCwgb2xkTGF0TG5nLmxhdGxuZy5sbmddDQogICAgICAgICAgICBdKS5hZGRUbyh0aGlzLm1hcCk7DQogICAgICAgIH0sDQogICAgICAgIGNvbnBpY2soKXsNCiAgICAgICAgICAgIHRoaXMucGlja3VwbG9jLm9uKCdtb3ZlJyx0aGlzLmNvbmZpcm0yKQ0KICAgICAgICAgICAgdGhpcy5waWNrdXBsYXQ9dGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubGF0DQogICAgICAgICAgICB0aGlzLnBpY2t1cGxvbmc9dGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubG5nDQogICAgICAgICAgICB0aGlzLnRoZXJ0PUwucG9seWdvbihbDQogICAgICAgICAgICAgICAgW3RoaXMucGlja3VwbGF0LCB0aGlzLnBpY2t1cGxvbmddLA0KICAgICAgICAgICAgICAgIFt0aGlzLnBpY2t1cGxhdCwgdGhpcy5waWNrdXBsb25nKzAuMDAzXQ0KICAgICAgICAgICAgXSkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICAgICAgdGhpcy5yZXFwaWNrdXBsb2M9TC5jaXJjbGUoW3RoaXMucGlja3VwbGF0LCB0aGlzLnBpY2t1cGxvbmddLCB7DQogICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsDQogICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnZ3JlZW4nLA0KICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjUsDQogICAgICAgICAgICAgICAgcmFkaXVzOiAyNSwNCiAgICAgICAgICAgIH0pLmFkZFRvKHRoaXMubWFwKTsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubGF0KQ0KICAgICAgICAgICAgdGhpcy5waWNrdXBsb2Muc2V0TGF0TG5nKFt0aGlzLnBpY2t1cGxhdCx0aGlzLnBpY2t1cGxvbmcrMC4wMDNdKQ0KICAgICAgICAgICAgdGhpcy5waWNrdXBsb2Mub24oJ21vdmUnLHRoaXMudXBkYXRlUG9seSkNCiAgICAgICAgICAgIHRoaXMudGhlcG9wdXAuc2V0TGF0TG5nKFt0aGlzLnBpY2t1cGxhdCsoMC4wMDMvKHRoaXMubWFwLmdldFpvb20oKSoqOSkpKigxMyoqOSksdGhpcy5waWNrdXBsb25nKzAuMDAzXSkNCiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnKQ0KICAgICAgICAgICAgdmFyIGJ0biA9IEwuRG9tVXRpbC5jcmVhdGUoJ2J1dHRvbicsICcnLCBjb250YWluZXIpOw0KICAgICAgICAgICAgdmFyIGJ0bjIgPSBMLkRvbVV0aWwuY3JlYXRlKCdidXR0b24nLCAnJywgY29udGFpbmVyKTsNCiAgICAgICAgICAgIGJ0bi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7DQogICAgICAgICAgICBidG4yLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTsNCiAgICAgICAgICAgIGJ0bi5pbm5lckhUTUwgPSAnY29uZmlybSBkcm9wb2ZmJzsNCiAgICAgICAgICAgIGJ0bjIuaW5uZXJIVE1MID0gJ2NhbmNlbCc7DQogICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKGJ0biwgJ2NsaWNrJywgYXN5bmMgKCkgPT4gew0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29uZHJvcCgpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIEwuRG9tRXZlbnQub24oYnRuMiwgJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMucmVxcGlja3VwbG9jLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgdGhpcy50aGVydC5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIHRoaXMucGlja3VwbG9jLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgdGhpcy5vdGhlcnJlcXN0YXR1cz1mYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMudGhlcG9wdXAucmVtb3ZlKCkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdmFyIG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgbmV3RGl2LmFwcGVuZENoaWxkKGJ0bik7DQogICAgICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQoYnRuMik7DQogICAgICAgICAgICB0aGlzLnRoZXBvcHVwLnNldENvbnRlbnQobmV3RGl2KQ0KICAgICAgICAgICAgdGhpcy50aGVwb3B1cC5vcGVuT24odGhpcy5tYXApDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGNvbmRyb3AoKXsNCiAgICAgICAgICAgIGlmKHRoaXMudGhldXNlcmlkPT11bmRlZmluZWQmJnRoaXMubG9nZ2VkaW4yPT1mYWxzZSl7DQogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbigiaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL2F1dGgvbG9naW4iKQ0KICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VkaW4yPXRydWUNCiAgICAgICAgICAgICAgICBjb25zdCB0aGV1c2VyaWQgPSBhd2FpdCB0aGlzLnVzZSgpOw0KICAgICAgICAgICAgICAgIHRoaXMudGhldXNlcmlkPXRoZXVzZXJpZC5pZA0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29uZHJvcCgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmKHRoaXMudGhldXNlcmlkPT11bmRlZmluZWQmJnRoaXMubG9nZ2VkaW4yPT10cnVlKXsNCiAgICAgICAgICAgICAgICBjb25zdCB0aGV1c2VyaWQgPSBhd2FpdCB0aGlzLnVzZSgpOw0KICAgICAgICAgICAgICAgIHRoaXMudGhldXNlcmlkPXRoZXVzZXJpZC5pZA0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGhldXNlcmlkKQ0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29uZHJvcCgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIHRoaXMuZ2l2aW5nYW5zPWF3YWl0IHRoaXMuZ2V0Z2l2ZSgpDQogICAgICAgICAgICAgICAgaWYodGhpcy5naXZpbmdhbnMucmVxdWVzdGVkPT11bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RlZD1mYWxzZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmKHRoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZD09J0ZhbHNlJyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdGVkPWZhbHNlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdGVkPXRydWUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYodGhpcy5yZXF1ZXN0ZWQ9PWZhbHNlKXsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vc2FmZS1yaXZlci0xNjQwOS5oZXJva3VhcHAuY29tL2FwaS9jaGFuZ2VyZXF1ZXN0ZWQnLHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pDQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVxZHJvcG9mZmxvYz1MLmNpcmNsZShbdGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubGF0LCB0aGlzLnBpY2t1cGxvYy5nZXRMYXRMbmcoKS5sbmddLCB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcsDQogICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICdyZWQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1czogMjUsDQogICAgICAgICAgICAgICAgICAgIH0pLmFkZFRvKHRoaXMubWFwKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVwb3B1cC5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBpY2t1cGxvYy5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXN0YXR1cz0nY2FuY2VsIHJlcXVlc3QgKDUgbWlsZSBwZW5hbHR5KScNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWQ9dHJ1ZQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLm90aGVycmVxc3RhdHVzPWZhbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMub2xkc2NvcmU9YXdhaXQgdGhpcy5nZXRzY29yZSgpDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoKCdodHRwczovL3NhZmUtcml2ZXItMTY0MDkuaGVyb2t1YXBwLmNvbS9hcGkvc2VuZHJpZGU/cmVxdWVzdGVkcGlja3VwbGF0PScrdGhpcy5waWNrdXBsYXQrJyZyZXF1ZXN0ZWRwaWNrdXBsb25nPScrdGhpcy5waWNrdXBsb25nKycmcmVxdWVzdGVkZHJvcG9mZmxhdD0nK3RoaXMucGlja3VwbG9jLmdldExhdExuZygpLmxhdCsnJnJlcXVlc3RlZGRyb3BvZmZsb25nPScrdGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubG5nLHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tyaWRlcmRlc3QodGhpcy5vbGRzY29yZSkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1lvdSBoYXZlIGFscmVhZHkgcmVxdWVzdGVkIGEgcmlkZScpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyB3YWl0Zm9yZHJpdmVyKG9sZHNjb3JlKXsNCiAgICAgICAgICAgIHRoaXMuc2NvcmU9YXdhaXQgdGhpcy5nZXRzY29yZSgpDQogICAgICAgICAgICBpZih0aGlzLnNjb3JlPT1vbGRzY29yZSl7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53YWl0Zm9yZHJpdmVyKG9sZHNjb3JlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGdldHNjb3JlKCl7DQogICAgICAgICAgICBjb25zdCByZXNwb25zZT1hd2FpdCBmZXRjaCgnaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL2dyYWJzY29yZScseyBjcmVkZW50aWFsczogJ2luY2x1ZGUnfSkNCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgY2hlY2tyaWRlcmRlc3Qob2xkc2NvcmUpew0KICAgICAgICAgICAgdGhpcy5sYXQ9YXdhaXQgdGhpcy5hbGxMaW5rcy5nZXRuZXdsYXQodGhpcy50aGV1c2VyaWQpOw0KICAgICAgICAgICAgdGhpcy5sb25nPWF3YWl0IHRoaXMuYWxsTGlua3MuZ2V0bmV3bG5nKHRoaXMudGhldXNlcmlkKTsNCiAgICAgICAgICAgIHRoaXMudXNlcnBvc2l0aW9uLnNldExhdExuZyhbdGhpcy5sYXQsdGhpcy5sb25nXSkNCiAgICAgICAgICAgIHRoaXMuc2NvcmU9YXdhaXQgdGhpcy5nZXRzY29yZSgpDQogICAgICAgICAgICAvL3RoaXMubGV0PWxhdA0KICAgICAgICAgICAgLy90aGlzLmxvbmc9bG9uZw0KICAgICAgICAgICAgY29uc3QgZGlzdD0oKHRoaXMucmVxdWVzdGVkZHJvcG9mZmxhdC10aGlzLmxhdCkqKjIrKHRoaXMucmVxdWVzdGVkZHJvcG9mZmxvbmctdGhpcy5sb25nKSoqMikqKjAuNQ0KICAgICAgICAgICAgaWYoZGlzdDwwLjAwMyl7DQogICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWQ9ZmFsc2UNCiAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL2NoYW5nZXJlcXVlc3RlZGZhbHNlJyx7IGNyZWRlbnRpYWxzOiAnaW5jbHVkZSd9KQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuc2NvcmU9PW9sZHNjb3JlKXsNCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53YWl0Zm9yZHJpdmVyKG9sZHNjb3JlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja3JpZGVyZGVzdCgpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGFjZ2l2ZXJpZGUobixuYW1lLHJwbGF0LHJwbG9uZyxyZGxhdCxyZGxvbmcpew0KICAgICAgICAgICAgdGhpcy5sYXQ9YXdhaXQgdGhpcy5hbGxMaW5rcy5nZXRuZXdsYXQodGhpcy50aGV1c2VyaWQpOw0KICAgICAgICAgICAgdGhpcy5sb25nPWF3YWl0IHRoaXMuYWxsTGlua3MuZ2V0bmV3bG5nKHRoaXMudGhldXNlcmlkKTsNCiAgICAgICAgICAgIGNvbnN0IGRpc3Q9KChycGxhdC10aGlzLmxhdCkqKjIrKHJwbG9uZy10aGlzLmxvbmcpKioyKSoqMC41DQogICAgICAgICAgICBjb25zdCBkaXN0bWlsZXMxPSgoKHJwbGF0LXRoaXMubGF0KSo2OS4xNzIpKioyKygocnBsb25nLXRoaXMubG9uZykqKE1hdGguY29zKCgocnBsYXQtdGhpcy5sYXQpLzIpKihNYXRoLlBJLzE4MCkpKSo2OS4xNzIpKioyKSoqMC41DQogICAgICAgICAgICB0aGlzLnRoZWdpdmVyaWRlcG9wdXBzW25dLnNldENvbnRlbnQoJ0dvIHRvJytuYW1lKycoJytkaXN0bWlsZXMxKydtaWxlcyBhd2F5KScpDQogICAgICAgICAgICBpZihkaXN0PDAuMDAzKXsNCiAgICAgICAgICAgICAgICB0aGlzLmVucm91dGU9dHJ1ZQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RtaWxlcz0oKChycGxhdC1yZGxhdCkqNjkuMTcyKSoqMisoKHJwbG9uZy1yZGxvbmcpKihNYXRoLmNvcygoKHJwbGF0LXJkbGF0KS8yKSooTWF0aC5QSS8xODApKSkqNjkuMTcyKSoqMikqKjAuNQ0KICAgICAgICAgICAgICAgIHRoaXMuY29zdD1kaXN0bWlsZXMNCiAgICAgICAgICAgICAgICB0aGlzLnRoZWdpdmVyaWRlcG9wdXBzW25dLnNldENvbnRlbnQoJ0RyaXZlJytuYW1lKyd0byB0aGUgZGVzdGluYXRpb24oJytkaXN0bWlsZXMrJ21pbGVzIGF3YXkpJykNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrZGVzdChuLG5hbWUscmRsYXQscmRsb25nKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjZ2l2ZXJpZGUobixuYW1lLHJwbGF0LHJwbG9uZyxyZGxhdCxyZGxvbmcpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGdldGdpdmUoKXsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlPWF3YWl0IGZldGNoKCdodHRwczovL3NhZmUtcml2ZXItMTY0MDkuaGVyb2t1YXBwLmNvbS9hcGkvZ2V0dXNlcmdpdmUnLHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pDQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIGJlZm9yZWFjZ2l2ZXJpZGUobixuYW1lLHJwbGF0LHJwbG9uZyxyZGxhdCxyZGxvbmcpew0KICAgICAgICAgICAgY29uc3QgdGhldXNlcmlkID0gYXdhaXQgdGhpcy51c2UoKTsNCiAgICAgICAgICAgIHRoaXMudGhldXNlcmlkPXRoZXVzZXJpZC5pZA0KICAgICAgICAgICAgaWYodGhpcy50aGV1c2VyaWQ9PXVuZGVmaW5lZCYmdGhpcy5sb2dnZWRpbj09ZmFsc2Upew0KICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oImh0dHBzOi8vc2FmZS1yaXZlci0xNjQwOS5oZXJva3VhcHAuY29tL2FwaS9hdXRoL2xvZ2luIikNCiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlZGluPXRydWUNCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJlZm9yZWFjZ2l2ZXJpZGUobixuYW1lLHJwbGF0LHJwbG9uZyxyZGxhdCxyZGxvbmcpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmKHRoaXMudGhldXNlcmlkPT11bmRlZmluZWQmJnRoaXMubG9nZ2VkaW49PXRydWUpew0KICAgICAgICAgICAgICAgIGNvbnN0IHRoZXVzZXJpZCA9IGF3YWl0IHRoaXMudXNlKCk7DQogICAgICAgICAgICAgICAgdGhpcy50aGV1c2VyaWQ9dGhldXNlcmlkLmlkDQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iZWZvcmVhY2dpdmVyaWRlKG4sbmFtZSxycGxhdCxycGxvbmcscmRsYXQscmRsb25nKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmdpdmluZ2Fucz1hd2FpdCB0aGlzLmdldGdpdmUoKQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2l2aW5nYW5zLmdpdmluZz09dW5kZWZpbmVkKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5naXZpbmc9ZmFsc2UNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmdpdmluZ2Fucy5naXZpbmc9PSdGYWxzZScpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdpdmluZz1mYWxzZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdpdmluZz10cnVlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ2l2aW5nKQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZD09dW5kZWZpbmVkKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWQ9ZmFsc2UNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmdpdmluZ2Fucy5yZXF1ZXN0ZWQ9PSdGYWxzZScpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RlZD1mYWxzZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RlZD10cnVlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2l2aW5nPT1mYWxzZSYmdGhpcy5yZXF1ZXN0ZWQ9PWZhbHNlKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5naXZpbmc9dHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL2NoYW5nZWdpdmUnLHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pDQogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWNnaXZlcmlkZShuLG5hbWUscnBsYXQscnBsb25nLHJkbGF0LHJkbG9uZykNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmdpdmluZz09dHJ1ZSYmdGhpcy5yZXF1ZXN0ZWQ9PWZhbHNlKXsNCiAgICAgICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbih0aGlzLm9rYnRuc1tuXSwgJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nb2JhY2sobikNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHZhciBuZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiRXJyb3I6IHlvdSBtdXN0IGNvbXBsZXRlIHlvdXIgY3VycmVudCByaWRlIGZpcnN0LiIpOw0KICAgICAgICAgICAgICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQobmV3Q29udGVudCk7DQogICAgICAgICAgICAgICAgICAgIG5ld0Rpdi5hcHBlbmRDaGlsZCh0aGlzLm9rYnRuc1tuXSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGhlZ2l2ZXJpZGVwb3B1cHNbbl0uc2V0Q29udGVudChuZXdEaXYpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odGhpcy5va2J0bnNbbl0sICdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ29iYWNrKG4pDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3d0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbmV3d0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiRXJyb3I6IHlvdSBtdXN0IGNhbmNlbCB5b3VyIGN1cnJlbnQgcmlkZSByZXF1ZXN0IG9yIGNvbXBsZXRlIGl0IGluIG9yZGVyIHRvIGdpdmUgYSByaWRlLiIpOw0KICAgICAgICAgICAgICAgICAgICBuZXd3RGl2LmFwcGVuZENoaWxkKG5ld3dDb250ZW50KTsNCiAgICAgICAgICAgICAgICAgICAgbmV3d0Rpdi5hcHBlbmRDaGlsZCh0aGlzLm9rYnRuc1tuXSk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudGhlZ2l2ZXJpZGVwb3B1cHNbbl0uc2V0Q29udGVudChuZXd3RGl2KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgZ2l2ZXJpZGUobix2YWwsbmFtZSxycGxhdCxycGxvbmcscmRsYXQscmRsb25nKXsNCiAgICAgICAgICAgIHRoaXMucmlkZXJpZD12YWwNCiAgICAgICAgICAgIEwuRG9tRXZlbnQub24odGhpcy55ZXNidG5zW25dLCAnY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVhY2dpdmVyaWRlKG4sbmFtZSxycGxhdCxycGxvbmcscmRsYXQscmRsb25nKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKHRoaXMubm9idG5zW25dLCAnY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5nb2JhY2sobikNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdmFyIG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgdmFyIG5ld0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiQXJlIHlvdXIgc3VyZT8gT3RoZXIgdXNlcnMgY2FuIHRlbGwgaWYgeW91IGZhaWxlZCB0byBjb21wbGV0ZSB0aGlzIHJpZGUuIik7DQogICAgICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQobmV3Q29udGVudCk7DQogICAgICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQodGhpcy55ZXNidG5zW25dKTsNCiAgICAgICAgICAgIG5ld0Rpdi5hcHBlbmRDaGlsZCh0aGlzLm5vYnRuc1tuXSk7DQogICAgICAgICAgICB0aGlzLnRoZWdpdmVyaWRlcG9wdXBzW25dLnNldENvbnRlbnQobmV3RGl2KQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBjaGVja2Rlc3Qobix2YWwscmRsYXQscmRsb25nKXsNCiAgICAgICAgICAgIGNvbnN0IHJpZGVybGF0PWF3YWl0IHRoaXMuZ2V0cmlkZXJsYXQodGhpcy5yaWRlcmlkKTsNCiAgICAgICAgICAgIGNvbnN0IHJpZGVybG9uZz1hd2FpdCB0aGlzLmdldHJpZGVybG9uZyh0aGlzLnJpZGVyaWQpOw0KICAgICAgICAgICAgdGhpcy5sYXQ9YXdhaXQgdGhpcy5hbGxMaW5rcy5nZXRuZXdsYXQodGhpcy50aGV1c2VyaWQpOw0KICAgICAgICAgICAgdGhpcy5sb25nPWF3YWl0IHRoaXMuYWxsTGlua3MuZ2V0bmV3bG5nKHRoaXMudGhldXNlcmlkKTsNCiAgICAgICAgICAgIHRoaXMudXNlcnBvc2l0aW9uLnNldExhdExuZyhbdGhpcy5sYXQsdGhpcy5sb25nXSkNCiAgICAgICAgICAgIGNvbnN0IGRpc3Q9KChyaWRlcmxhdC1yZGxhdCkqKjIrKHJpZGVybG9uZy1yZGxvbmcpKioyKSoqMC41DQogICAgICAgICAgICBjb25zdCBkaXN0bWlsZXM9KCgocmlkZXJsYXQtcmRsYXQpKjY5LjE3MikqKjIrKChyaWRlcmxvbmctcmRsb25nKSooTWF0aC5jb3MoKChyaWRlcmxhdC1yZGxhdCkvMikqKE1hdGguUEkvMTgwKSkpKjY5LjE3MikqKjIpKiowLjUNCiAgICAgICAgICAgIGlmKGRpc3Q8MC4wMDMpew0KICAgICAgICAgICAgICAgIHRoaXMuZ2l2aW5nPWZhbHNlDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vc2FmZS1yaXZlci0xNjQwOS5oZXJva3VhcHAuY29tL2FwaS9jaGFuZ2VnaXZlZmFsc2UnLHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vc2FmZS1yaXZlci0xNjQwOS5oZXJva3VhcHAuY29tL2FwaS9maW5pc2hlZD9jb3N0PScrdGhpcy5jb3N0KycmcmlkZXI9Jyt0aGlzLnJpZGVyaWQseyBjcmVkZW50aWFsczogJ2luY2x1ZGUnfSkNCiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlPWF3YWl0IHRoaXMuZ2V0c2NvcmUoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLnRoZWdpdmVyaWRlcG9wdXBzW25dLnNldENvbnRlbnQoJ0RyaXZlJyt2YWwrJ3RvIHRoZSBkZXN0aW5hdGlvbignK2Rpc3RtaWxlcysnbWlsZXMgYXdheSknKQ0KICAgICAgICAgICAgICAgIHRoaXMudGhlZ2l2ZXJpZGVwb3B1cHNbbl0uc2V0TGF0TG5nKFtyaWRlcmxhdCxyaWRlcmxvbmddKQ0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tkZXN0KHJkbGF0LHJkbG9uZykNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgdXNlKCl7DQogICAgICAgICAgICBjb25zdCByZXNwb25zZT1hd2FpdCBmZXRjaCgnaHR0cHM6Ly9zYWZlLXJpdmVyLTE2NDA5Lmhlcm9rdWFwcC5jb20vYXBpL3VzZXInLHsgY3JlZGVudGlhbHM6ICdpbmNsdWRlJ30pDQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgICAgIH0sDQogICAgICAgIGdvYmFjayhuKXsNCiAgICAgICAgICAgIHRoaXMudGhlZ2l2ZXJpZGVwb3B1cHNbbl0uc2V0Q29udGVudCh0aGlzLnRoZWJ0bnNbbl0pDQogICAgICAgIH0sDQogICAgICAgIGNvbmZpcm0odmFsKXsNCiAgICAgICAgICAgIHRoaXMudGhlcG9wdXAuc2V0TGF0TG5nKFt2YWwubGF0bG5nLmxhdCsoMC4wMDMvKHRoaXMubWFwLmdldFpvb20oKSoqOSkpKigxMyoqOSksdmFsLmxhdGxuZy5sbmddKQ0KICAgICAgICAgICAgLy90aGlzLm1hcC5vcGVuUG9wdXAoJzxiLWJ1dHRvbiBpZD0idGVzdCIgQGNsaWNrPSJ0ZXN0Ij50ZXN0PC9iLWJ1dHRvbj4nLFt2YWwubGF0bG5nLmxhdCswLjAwMyx2YWwubGF0bG5nLmxuZ10se2Nsb3NlQnV0dG9uOiBmYWxzZSwgY2xvc2VPbkNsaWNrOiBmYWxzZX0pDQogICAgICAgICAgICB2YXIgY29udGFpbmVyID0gTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JykNCiAgICAgICAgICAgIHZhciBidG4gPSBMLkRvbVV0aWwuY3JlYXRlKCdidXR0b24nLCAnJywgY29udGFpbmVyKTsNCiAgICAgICAgICAgIHZhciBidG4yID0gTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcik7DQogICAgICAgICAgICBidG4uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOw0KICAgICAgICAgICAgYnRuMi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7DQogICAgICAgICAgICBidG4uaW5uZXJIVE1MID0gJ2NvbmZpcm0gcGlja3VwJzsNCiAgICAgICAgICAgIGJ0bjIuaW5uZXJIVE1MID0gJ2NhbmNlbCc7DQogICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKGJ0biwgJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuY29ucGljaygpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIEwuRG9tRXZlbnQub24oYnRuMiwgJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMudGhlcG9wdXAucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICB0aGlzLnBpY2t1cGxvYy5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIHRoaXMub3RoZXJyZXFzdGF0dXM9ZmFsc2UNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdmFyIG5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAgICAgbmV3RGl2LmFwcGVuZENoaWxkKGJ0bik7DQogICAgICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQoYnRuMik7DQogICAgICAgICAgICB0aGlzLnRoZXBvcHVwLnNldENvbnRlbnQobmV3RGl2KQ0KICAgICAgICAgICAgdGhpcy50aGVwb3B1cC5vcGVuT24odGhpcy5tYXApDQogICAgICAgIH0sDQogICAgICAgIGNvbmZpcm0yKHZhbCl7DQogICAgICAgICAgICB0aGlzLnRoZXBvcHVwLnNldExhdExuZyhbdmFsLmxhdGxuZy5sYXQrKDAuMDAzLyh0aGlzLm1hcC5nZXRab29tKCkqKjkpKSooMTMqKjkpLHZhbC5sYXRsbmcubG5nXSkNCiAgICAgICAgICAgIC8vdGhpcy5tYXAub3BlblBvcHVwKCc8Yi1idXR0b24gaWQ9InRlc3QiIEBjbGljaz0idGVzdCI+dGVzdDwvYi1idXR0b24+JyxbdmFsLmxhdGxuZy5sYXQrMC4wMDMsdmFsLmxhdGxuZy5sbmddLHtjbG9zZUJ1dHRvbjogZmFsc2UsIGNsb3NlT25DbGljazogZmFsc2V9KQ0KICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicpDQogICAgICAgICAgICB2YXIgYnRuID0gTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcik7DQogICAgICAgICAgICB2YXIgYnRuMiA9IEwuRG9tVXRpbC5jcmVhdGUoJ2J1dHRvbicsICcnLCBjb250YWluZXIpOw0KICAgICAgICAgICAgYnRuLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTsNCiAgICAgICAgICAgIGJ0bjIuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOw0KICAgICAgICAgICAgYnRuLmlubmVySFRNTCA9ICdjb25maXJtIGRyb3BvZmYnOw0KICAgICAgICAgICAgYnRuMi5pbm5lckhUTUwgPSAnY2FuY2VsJzsNCiAgICAgICAgICAgIEwuRG9tRXZlbnQub24oYnRuLCAnY2xpY2snLCBhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25kcm9wKCkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgTC5Eb21FdmVudC5vbihidG4yLCAnY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5yZXFwaWNrdXBsb2MucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICB0aGlzLnRoZXJ0LnJlbW92ZSgpDQogICAgICAgICAgICAgICAgdGhpcy50aGVwb3B1cC5yZW1vdmUoKQ0KICAgICAgICAgICAgICAgIHRoaXMucGlja3VwbG9jLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgdGhpcy5vdGhlcnJlcXN0YXR1cz1mYWxzZQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB2YXIgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICBuZXdEaXYuYXBwZW5kQ2hpbGQoYnRuKTsNCiAgICAgICAgICAgIG5ld0Rpdi5hcHBlbmRDaGlsZChidG4yKTsNCiAgICAgICAgICAgIHRoaXMudGhlcG9wdXAuc2V0Q29udGVudChuZXdEaXYpDQogICAgICAgICAgICB0aGlzLnRoZXBvcHVwLm9wZW5Pbih0aGlzLm1hcCkNCiAgICAgICAgfSwNCiAgICAgICAgY2hhbmdlcG9wKCl7DQogICAgICAgICAgICB0aGlzLnRoZXBvcHVwLnNldExhdExuZyhbdGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubGF0KygwLjAwMy8odGhpcy5tYXAuZ2V0Wm9vbSgpKio5KSkqKDEzKio5KSwgdGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubG5nXSkNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgc2V0cGlja3VwKCl7DQogICAgICAgICAgICBpZih0aGlzLnRoZXVzZXJpZD09dW5kZWZpbmVkKXsNCiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RlZD1mYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmdpdmluZ2Fucz1hd2FpdCB0aGlzLmdldGdpdmUoKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZCkNCiAgICAgICAgICAgICAgICBpZih0aGlzLmdpdmluZ2Fucy5yZXF1ZXN0ZWQ9PXVuZGVmaW5lZCl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdGVkPWZhbHNlDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5naXZpbmdhbnMucmVxdWVzdGVkPT0nRmFsc2UnKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWQ9ZmFsc2UNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWQ9dHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gDQogICAgICAgICAgICBpZih0aGlzLnJlcXVlc3RlZD09ZmFsc2UmJnRoaXMub3RoZXJyZXFzdGF0dXM9PWZhbHNlKXsNCiAgICAgICAgICAgICAgICB0aGlzLm90aGVycmVxc3RhdHVzPXRydWUNCiAgICAgICAgICAgICAgICBsZXQgcGluSWNvbiA9IEwuaWNvbih7DQogICAgICAgICAgICAgICAgICAgIGljb25Vcmw6IGltYWdlLA0KICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzIwLDIwXSwNCiAgICAgICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogWzEwLjUsMjBdDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgdGhpcy5waWNrdXBsb2MgPSBMLm1hcmtlcihbdGhpcy5sYXQsIHRoaXMubG9uZ10sIHsNCiAgICAgICAgICAgICAgICAgICAgaWNvbjogcGluSWNvbiwNCiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiAnVHJ1ZScNCiAgICAgICAgICAgICAgICB9KS5hZGRUbyh0aGlzLm1hcCk7DQogICAgICAgICAgICAgICAgdGhpcy5wcm92aWRlciA9IG5ldyBPcGVuU3RyZWV0TWFwUHJvdmlkZXIoKTsNCiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaENvbnRyb2wgPSBuZXcgR2VvU2VhcmNoQ29udHJvbCh7DQogICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyOiB0aGlzLnByb3ZpZGVyLA0KICAgICAgICAgICAgICAgICAgICBzaG93TWFya2VyOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIHRoaXMubWFwLmFkZENvbnRyb2wodGhpcy5zZWFyY2hDb250cm9sKTsNCiAgICAgICAgICAgICAgICB0aGlzLm1hcC5vbignZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHRoaXMud29yayk7DQogICAgICAgICAgICAgICAgLy90aGlzLm1hcC5vcGVuUG9wdXAoJzxwPnRlc3Q8L3A+JyxbdGhpcy5waWNrdXBsb2MuZ2V0TGF0TG5nKCkubGF0KzAuMDAzLHRoaXMucGlja3VwbG9jLmdldExhdExuZygpLmxuZ10se2Nsb3NlQnV0dG9uOiBmYWxzZSwgY2xvc2VPbkNsaWNrOiBmYWxzZX0pDQogICAgICAgICAgICAgICAgdGhpcy50aGVwb3B1cD1MLnBvcHVwKHtjbG9zZUJ1dHRvbjpmYWxzZSxjbG9zZU9uQ2xpY2s6ZmFsc2V9KTsNCiAgICAgICAgICAgICAgICB0aGlzLnRoZXBvcHVwLnNldExhdExuZyhbdGhpcy5sYXQrKDAuMDAzLyh0aGlzLm1hcC5nZXRab29tKCkqKjkpKSooMTMqKjkpLCB0aGlzLmxvbmddKQ0KICAgICAgICAgICAgICAgIHRoaXMubWFwLm9uKCd6b29tZW5kJyx0aGlzLmNoYW5nZXBvcCkNCiAgICAgICAgICAgICAgICAvL3RoaXMubWFwLm9wZW5Qb3B1cCgnPGItYnV0dG9uIGlkPSJ0ZXN0IiBAY2xpY2s9InRlc3QiPnRlc3Q8L2ItYnV0dG9uPicsW3ZhbC5sYXRsbmcubGF0KzAuMDAzLHZhbC5sYXRsbmcubG5nXSx7Y2xvc2VCdXR0b246IGZhbHNlLCBjbG9zZU9uQ2xpY2s6IGZhbHNlfSkNCiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gTC5Eb21VdGlsLmNyZWF0ZSgnZGl2JykNCiAgICAgICAgICAgICAgICB2YXIgYnRuID0gTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcik7DQogICAgICAgICAgICAgICAgdmFyIGJ0bjIgPSBMLkRvbVV0aWwuY3JlYXRlKCdidXR0b24nLCAnJywgY29udGFpbmVyKTsNCiAgICAgICAgICAgICAgICBidG4uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOw0KICAgICAgICAgICAgICAgIGJ0bjIuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOw0KICAgICAgICAgICAgICAgIGJ0bi5pbm5lckhUTUwgPSAnY29uZmlybSBwaWNrdXAnOw0KICAgICAgICAgICAgICAgIGJ0bjIuaW5uZXJIVE1MID0gJ2NhbmNlbCc7DQogICAgICAgICAgICAgICAgTC5Eb21FdmVudC5vbihidG4sICdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25waWNrKCkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBMLkRvbUV2ZW50Lm9uKGJ0bjIsICdjbGljaycsICgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5waWNrdXBsb2MucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB2YXIgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICAgICAgbmV3RGl2LmFwcGVuZENoaWxkKGJ0bik7DQogICAgICAgICAgICAgICAgbmV3RGl2LmFwcGVuZENoaWxkKGJ0bjIpOw0KICAgICAgICAgICAgICAgIHRoaXMudGhlcG9wdXAuc2V0Q29udGVudChuZXdEaXYpDQogICAgICAgICAgICAgICAgdGhpcy50aGVwb3B1cC5vcGVuT24odGhpcy5tYXApDQogICAgICAgICAgICAgICAgdGhpcy5waWNrdXBsb2Mub24oJ21vdmUnLHRoaXMuY29uZmlybSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYodGhpcy5vdGhlcnJlcXN0YXR1cz09dHJ1ZSl7DQogICAgICAgICAgICAgICAgYWxlcnQoJ0FscmVhZHkgcmVxdWVzdGluZywgZHJhZyBwaW4gdG8gc2V0IHBpY2t1cCBsb2NhdGlvbicpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdGVkPWZhbHNlDQogICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vc2FmZS1yaXZlci0xNjQwOS5oZXJva3VhcHAuY29tL2FwaS9jaGFuZ2VyZXF1ZXN0ZWRmYWxzZScseyBjcmVkZW50aWFsczogJ2luY2x1ZGUnfSkNCiAgICAgICAgICAgICAgICB0aGlzLnJlcXN0YXR1cz0ncmVxdWVzdCByaWRlJw0KICAgICAgICAgICAgICAgIHRoaXMub3RoZXJyZXFzdGF0dXM9ZmFsc2UNCiAgICAgICAgICAgICAgICBpZih0aGlzLnJlcXBpY2t1cGxvYyE9J3Rlc3QnKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXFwaWNrdXBsb2MucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXFkcm9wb2ZmbG9jLnJlbW92ZSgpDQogICAgICAgICAgICAgICAgICAgIHRoaXMudGhlcnQucmVtb3ZlKCkNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHNldHVwbWFwKCl7DQogICAgICAgICAgICB0aGlzLm1hcCA9IEwubWFwKCdtYXBDb250YWluZXInKS5zZXRWaWV3KFt0aGlzLmxhdCwgdGhpcy5sb25nXSwgMTMpOw0KICAgICAgICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8vYXBpLm1hcGJveC5jb20vc3R5bGVzL3YxL3tpZH0vdGlsZXMve3p9L3t4fS97eX0/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pYldGd1ltOTRJaXdpWVNJNkltTnBlalk0TlhWeWNUQTJlbVl5Y1hCbmRIUnFjbVozTjNnaWZRLnJKY0ZJRzIxNEFyaUlTTGJCNkI1YXcnLCB7DQogICAgICAgICAgICAgICAgbWF4Wm9vbTogMTgsDQogICAgICAgICAgICAgICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj0iaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0Ij5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICcgKw0KICAgICAgICAgICAgICAgICAgICAnSW1hZ2VyeSDCqSA8YSBocmVmPSJodHRwczovL3d3dy5tYXBib3guY29tLyI+TWFwYm94PC9hPicsDQogICAgICAgICAgICAgICAgaWQ6ICdtYXBib3gvc3RyZWV0cy12MTEnLA0KICAgICAgICAgICAgICAgIHRpbGVTaXplOiA1MTIsDQogICAgICAgICAgICAgICAgem9vbU9mZnNldDogLTENCiAgICAgICAgICAgIH0pLmFkZFRvKHRoaXMubWFwKTsNCiAgICAgICAgICAgIHRoaXMudXNlcnBvc2l0aW9uID0gTC5jaXJjbGUoW3RoaXMubGF0LCB0aGlzLmxvbmddLCB7DQogICAgICAgICAgICAgICAgY29sb3I6ICdibHVlJywNCiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICdibHVlJywNCiAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC41LA0KICAgICAgICAgICAgICAgIHJhZGl1czogMjUsDQogICAgICAgICAgICB9KS5hZGRUbyh0aGlzLm1hcCk7DQogICAgICAgICAgICBjb25zdCB0aGVkYXQ9YXdhaXQgdGhpcy5nZXRyaWRlcygpDQogICAgICAgICAgICB2YXIgaj0wDQogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoZWRhdFswXS5Mb2NhdGlvbjM2bjc5WzBdKQ0KICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxPYmplY3QudmFsdWVzKHRoZWRhdFswXS5Mb2NhdGlvbjM2bjc5WzBdKS5sZW5ndGg7aSsrKXsNCiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlcz1PYmplY3QudmFsdWVzKHRoZWRhdFswXS5Mb2NhdGlvbjM2bjc5WzBdKQ0KICAgICAgICAgICAgICAgIHRoaXMuaW5kcy5wdXNoKGopDQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh2YWx1ZXNbaV0pDQogICAgICAgICAgICAgICAgaWYodGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkcGlja3VwbGF0IT0iIiYmdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkcGlja3VwbGF0IT11bmRlZmluZWQpew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnZhbHVlc1tpXVswXS5uYW1lIT10aGlzLnRoZXVzZXJpZCl7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9seWdvbiA9IEwucG9seWdvbihbDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMudmFsdWVzW2ldWzBdLnJlcXVlc3RlZHBpY2t1cGxhdCwgdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkcGlja3VwbG9uZ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgW3RoaXMudmFsdWVzW2ldWzBdLnJlcXVlc3RlZGRyb3BvZmZsYXQsIHRoaXMudmFsdWVzW2ldWzBdLnJlcXVlc3RlZGRyb3BvZmZsb25nXQ0KICAgICAgICAgICAgICAgICAgICAgICAgXSkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0eXBlb2YodmFsdWVzW2ldWzBdKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGhlZ2l2ZXJpZGVwb3B1cHMucHVzaChMLnBvcHVwKHtjbG9zZUJ1dHRvbjpmYWxzZSxjbG9zZU9uQ2xpY2s6ZmFsc2V9KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsdWVzW2ldWzBdLmFwcGVuZCh7aW5kOmp9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lcj1MLkRvbVV0aWwuY3JlYXRlKCdkaXYnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVidG5zLnB1c2goTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aGVidG5zW2pdLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGhlYnRuc1tqXS5pbm5lckhUTUwgPSAnZ2l2ZSByaWRlJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odGhpcy50aGVidG5zW2pdLCAnY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5naXZlcmlkZSh0aGlzLmluZHNbaV0sdGhpcy52YWx1ZXNbaV1bMF0ubmFtZSx0aGlzLnZhbHVlc1tpXVswXS5hY25hbWUsdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkcGlja3VwbGF0LHRoaXMudmFsdWVzW2ldWzBdLnJlcXVlc3RlZHBpY2t1cGxvbmcsdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkZHJvcG9mZmxhdCx0aGlzLnZhbHVlc1tpXVswXS5yZXF1ZXN0ZWRkcm9wb2ZmbG9uZykNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55ZXNidG5zLnB1c2goTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55ZXNidG5zW2pdLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueWVzYnRuc1tqXS5pbm5lckhUTUwgPSAnWWVzJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm9idG5zLnB1c2goTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2J0bnNbal0uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2J0bnNbal0uaW5uZXJIVE1MID0gJ05vJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2tidG5zLnB1c2goTC5Eb21VdGlsLmNyZWF0ZSgnYnV0dG9uJywgJycsIGNvbnRhaW5lcikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5va2J0bnNbal0uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5va2J0bnNbal0uaW5uZXJIVE1MID0gJ09LJzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGhlZ2l2ZXJpZGVwb3B1cHNbal0uc2V0Q29udGVudCh0aGlzLnRoZWJ0bnNbal0pDQogICAgICAgICAgICAgICAgICAgICAgICBwb2x5Z29uLmJpbmRQb3B1cCh0aGlzLnRoZWdpdmVyaWRlcG9wdXBzW2pdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaXJjbGUgPSBMLmNpcmNsZShbdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkcGlja3VwbGF0LCB0aGlzLnZhbHVlc1tpXVswXS5yZXF1ZXN0ZWRwaWNrdXBsb25nXSwgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnYmx1ZScsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDI1LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlLmJpbmRQb3B1cCh0aGlzLnRoZWdpdmVyaWRlcG9wdXBzW2pdKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNpcmNsZTIgPSBMLmNpcmNsZShbdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkZHJvcG9mZmxhdCwgdGhpcy52YWx1ZXNbaV1bMF0ucmVxdWVzdGVkZHJvcG9mZmxvbmddLCB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdyZWQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJ3JlZCcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDI1LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlMi5iaW5kUG9wdXAodGhpcy50aGVnaXZlcmlkZXBvcHVwc1tqXSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGorPTENCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgYWRkTGluayAobmV3TGluaykgew0KICAgICAgICAgICAgY29uc29sZS5sb2coYEVWRU5UOiBhZGQgbmV3IGl0ZW0gJHtuZXdMaW5rLm5hbWV9IHRvICR7dGhpcy5saW5rR3JvdXAudGl0bGV9YCk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCduZXctbGluaycsIHRoaXMuZ3JvdXBJZCwgbmV3TGluayk7DQogICAgICAgICAgICAvLyBtYXkgYWxzbyBkbyBhZGRpdGlvbmFsIHdvcmsgcmVsYXRlZCB0byBsb2dnaW5nLCBpbnRlcmFjdGl2aXR5LCBvciBvdGhlciB0cmFja2luZyBjaGFuZ2VzDQogICAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIG1vdW50ZWQgKCkgew0KICAgICAgICBjb25zdCB0aGV1c2VyaWQ9YXdhaXQgdGhpcy51c2UoKQ0KICAgICAgICB0aGlzLnRoZXVzZXJpZD10aGV1c2VyaWQuaWQNCiAgICAgICAgY29uc29sZS5sb2codGhpcy50aGV1c2VyaWQpDQogICAgICAgIGNvbnN0IG5ld2xhdD1hd2FpdCB0aGlzLmFsbExpbmtzLmdldG5ld2xhdCh0aGlzLnRoZXVzZXJpZCk7DQogICAgICAgIGNvbnN0IG5ld2xuZz1hd2FpdCB0aGlzLmFsbExpbmtzLmdldG5ld2xuZyh0aGlzLnRoZXVzZXJpZCk7DQogICAgICAgIHRoaXMubGF0PW5ld2xhdA0KICAgICAgICB0aGlzLmxvbmc9bmV3bG5nDQogICAgICAgIHRoaXMuc2V0dXBtYXAoKTsNCiAgICAgICAgdGhpcy5pc2xvYWRpbmc9JycNCiAgICAgICAgaWYodGhpcy50aGV1c2VyaWQhPXVuZGVmaW5lZCl7DQogICAgICAgICAgICB0aGlzLmdpdmluZ2Fucz1hd2FpdCB0aGlzLmdldGdpdmUoKQ0KICAgICAgICAgICAgdGhpcy5zY29yZT1hd2FpdCB0aGlzLmdldHNjb3JlKCkNCiAgICAgICAgICAgIGlmKHRoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZD09J1RydWUnKXsNCiAgICAgICAgICAgICAgICB0aGlzLnJlcXN0YXR1cz0nQ2FuY2VsIHJlcXVlc3QgKDUgbWlsZSBwZW5hbHR5KScNCiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RlZD10cnVlDQogICAgICAgICAgICAgICAgdGhpcy5yZXFwaWNrdXBsb2M9TC5jaXJjbGUoW3RoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZHBpY2t1cGxhdCwgdGhpcy5naXZpbmdhbnMucmVxdWVzdGVkcGlja3VwbG9uZ10sIHsNCiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICdncmVlbicsDQogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJ2dyZWVuJywNCiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNSwNCiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAyNSwNCiAgICAgICAgICAgICAgICB9KS5hZGRUbyh0aGlzLm1hcCk7DQogICAgICAgICAgICAgICAgdGhpcy50aGVydD1MLnBvbHlnb24oWw0KICAgICAgICAgICAgICAgICAgICBbdGhpcy5naXZpbmdhbnMucmVxdWVzdGVkcGlja3VwbGF0LCB0aGlzLmdpdmluZ2Fucy5yZXF1ZXN0ZWRwaWNrdXBsb25nXSwNCiAgICAgICAgICAgICAgICAgICAgW3RoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZGRyb3BvZmZsYXQsIHRoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZGRyb3BvZmZsb25nXQ0KICAgICAgICAgICAgICAgIF0pLmFkZFRvKHRoaXMubWFwKTsNCiAgICAgICAgICAgICAgICB0aGlzLnJlcWRyb3BvZmZsb2M9TC5jaXJjbGUoW3RoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZGRyb3BvZmZsYXQsIHRoaXMuZ2l2aW5nYW5zLnJlcXVlc3RlZGRyb3BvZmZsb25nXSwgew0KICAgICAgICAgICAgICAgICAgICBjb2xvcjogJ3JlZCcsDQogICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJ3JlZCcsDQogICAgICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjUsDQogICAgICAgICAgICAgICAgICAgIHJhZGl1czogMjUsDQogICAgICAgICAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApOw0KICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hlY2tyaWRlcmRlc3QoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RlZD1mYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYodGhpcy5naXZpbmdhbnMuZ2l2aW5nPT0nVHJ1ZScpew0KICAgICAgICAgICAgICAgIHRoaXMuZ2l2aW5nPT10cnVlDQogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGVja2Rlc3QoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmdpdmluZz1mYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vY29uc3QgbmV3bG5nPWF3YWl0IHRoaXMuYWxsTGlua3MuZ2V0bG9uZygpOw0KICAgICAgICAvKg0KICAgICAgICB2YXIgdGhlbGF0PTANCiAgICAgICAgdmFyIHRoZWxvbmc9MA0KICAgICAgICBjb25zb2xlLmxvZyg5OTkpDQogICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3MocG9zaXRpb24pIHsNCiAgICAgICAgICAgIHRoZWxhdD1wb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7DQogICAgICAgICAgICB0aGVsb25nPXBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGZ1bmN0aW9uIGVycm9yKCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byByZXRyaWV2ZSB5b3VyIGxvY2F0aW9uJyk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHZW9sb2NhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3NlcicpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihzdWNjZXNzLCBlcnJvcik7DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgbXltYXAgPSBMLm1hcCgnbWFwaWQnKS5zZXRWaWV3KFt0aGVsYXQsIHRoZWxvbmddLCAxMyk7DQogICAgICAgIEwudGlsZUxheWVyKCdodHRwczovL2FwaS5tYXBib3guY29tL3N0eWxlcy92MS97aWR9L3RpbGVzL3t6fS97eH0ve3l9P2FjY2Vzc190b2tlbj1way5leUoxSWpvaWJXRndZbTk0SWl3aVlTSTZJbU5wZWpZNE5YVnljVEEyZW1ZeWNYQm5kSFJxY21aM04zZ2lmUS5ySmNGSUcyMTRBcmlJU0xiQjZCNWF3Jywgew0KICAgICAgICAgICAgbWF4Wm9vbTogMTgsDQogICAgICAgICAgICBhdHRyaWJ1dGlvbjogJ01hcCBkYXRhICZjb3B5OyA8YSBocmVmPSJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJyArDQogICAgICAgICAgICAgICAgJ0ltYWdlcnkgwqkgPGEgaHJlZj0iaHR0cHM6Ly93d3cubWFwYm94LmNvbS8iPk1hcGJveDwvYT4nLA0KICAgICAgICAgICAgaWQ6ICdtYXBib3gvc3RyZWV0cy12MTEnLA0KICAgICAgICAgICAgdGlsZVNpemU6IDUxMiwNCiAgICAgICAgICAgIHpvb21PZmZzZXQ6IC0xDQogICAgICAgIH0pLmFkZFRvKG15bWFwKTsNCiAgICAgICAgZm9yKGxldCBpPTE7aTx0aGlzLmFsbExpbmtzLmRhdGEubGVuZ3RoO2krKyl7DQogICAgICAgICAgICB2YXIgcG9seWdvbiA9IEwucG9seWdvbihbDQogICAgICAgICAgICBbdGhpcy5hbGxMaW5rcy5kYXRhW2ldLnJlcXVlc3RlZHBpY2t1cGxhdCwgdGhpcy5hbGxMaW5rcy5kYXRhLnVzZXJzW2ldLnJlcXVlc3RlZHBpY2t1cGxvbmddLA0KICAgICAgICAgICAgW3RoaXMuYWxsTGlua3MuZGF0YVtpXS5yZXF1ZXN0ZWRkcm9wb2ZmbGF0LCB0aGlzLmFsbExpbmtzLmRhdGEudXNlcnNbaV0ucmVxdWVzdGVkZHJvcG9mZmxvbmddDQogICAgICAgICAgICBdKS5hZGRUbyhteW1hcCk7DQogICAgICAgICAgICBwb2x5Z29uLmJpbmRQb3B1cCgnPGg0PicrdGhpcy5hbGxMaW5rcy5kYXRhW2ldLm5hbWUrJzwvaDQ+Jykub3BlblBvcHVwKCk7DQogICAgICAgICAgICBsZXQgY2lyY2xlID0gTC5jaXJjbGUoW3RoaXMuYWxsTGlua3MuZGF0YVtpXS5yZXF1ZXN0ZWRwaWNrdXBsYXQsIHRoaXMuYWxsTGlua3MuZGF0YVtpXS5yZXF1ZXN0ZWRwaWNrdXBsb25nXSwgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAnYmx1ZScsDQogICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnYmx1ZScsDQogICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IDAuNSwNCiAgICAgICAgICAgICAgICByYWRpdXM6IDI1LA0KICAgICAgICAgICAgfSkuYWRkVG8obXltYXApOw0KICAgICAgICAgICAgY2lyY2xlLmJpbmRQb3B1cCgnPGg0PicrdGhpcy5hbGxMaW5rcy5kYXRhW2ldLm5hbWUrJzwvaDQ+Jykub3BlblBvcHVwKCk7DQogICAgICAgICAgICBsZXQgY2lyY2xlMiA9IEwuY2lyY2xlKFt0aGlzLmFsbExpbmtzLmRhdGFbaV0ucmVxdWVzdGVkZHJvcG9mZmxhdCwgdGhpcy5hbGxMaW5rcy5kYXRhW2ldLnJlcXVlc3RlZGRyb3BvZmZsb25nXSwgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAncmVkJywNCiAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICdyZWQnLA0KICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjUsDQogICAgICAgICAgICAgICAgcmFkaXVzOiAyNSwNCiAgICAgICAgICAgIH0pLmFkZFRvKG15bWFwKTsNCiAgICAgICAgICAgIGNpcmNsZTIuYmluZFBvcHVwKCc8aDQ+Jyt0aGlzLmFsbExpbmtzLmRhdGFbaV0ubmFtZSsnPC9oND4nKS5vcGVuUG9wdXAoKTsNCiAgICAgICAgfQ0KICAgICAgICAqLw0KICAgIH0NCn0NCg=="},{"version":3,"sources":["TheMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TheMap.vue","sourceRoot":"src/components","sourcesContent":["/*\r\n * This represents displaying a group of links.\r\n *\r\n * This is an example of a convenience component that serves to organize the data hierarchy.\r\n * It re-emits the custom events of its child components, adding its own information to them\r\n * to provide for future data accessor methods.\r\n *\r\n * @author Dennis Quan\r\n * @author Robert Duvall\r\n */\r\n\r\n// display group as a column or cards that is organized by BootstrapVue\r\n<template>\r\n    <div id=\"mapwrap\">\r\n        <header>\r\n            <h1>{{score}} miles available for ride requests. Complete ride requests on the map to earn more miles! {{isloading}}</h1>\r\n        </header>\r\n        <div id=\"mapContainer\"></div>\r\n        <b-button id=\"request\" @click=\"setpickup\">{{reqstatus}}</b-button>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as L from 'leaflet';\r\nimport { GeoSearchControl, OpenStreetMapProvider } from 'leaflet-geosearch';\r\nimport '../../node_modules/leaflet/dist/leaflet.css';\r\nimport '../../node_modules/leaflet-geosearch/dist/geosearch.css';\r\nimport { linkDataStore } from '../data/LinkDataStore.js'\r\nimport image from './Images/pin.png' \r\n//import { getJSON } from './apiHelper';\r\nexport default {\r\n    name: 'TheMap',\r\n    data () {\r\n        return {\r\n            // backing data for edits using v-model, no copy needed since Strings are immutable\r\n            allLinks: linkDataStore,\r\n            map: 'test',\r\n            pickuploc:'init',\r\n            reqstatus: 'request ride',\r\n            provider: 'test',\r\n            searchControl: 'test',\r\n            reqpickuploc:'test',\r\n            reqdropoffloc:'test',\r\n            thert:'test',\r\n            pickuplat:0,\r\n            pickuplong:0,\r\n            lat:0,\r\n            long:0,\r\n            userid:\"\",\r\n            ispick:\"\",\r\n            thepopup:\"\",\r\n            thegiveridepopups:[],\r\n            cost:\"\",\r\n            riderid:\"\",\r\n            enroute:false,\r\n            thebtns:[],\r\n            inds:[],\r\n            yesbtns:[],\r\n            nobtns:[],\r\n            containers:[],\r\n            giving:false,\r\n            okbtns:[],\r\n            loggedin:false,\r\n            loggedin2:false,\r\n            requested:false,\r\n            theuserid:{},\r\n            otherreqstatus:false,\r\n            score:15,\r\n            isloading:'(loading map)'\r\n            // may also need a copy group information if there is any chance it might be changed interactively\r\n        };\r\n    },\r\n    methods: {\r\n        // emit event that signals a new link is ready to be added\r\n        // NOTE, error checking is done in the child component\r\n        async getrides(){\r\n            const response = await fetch('https://safe-river-16409.herokuapp.com/api/getLinks')//?lat='+this.lat+'&long='+this.long);\r\n            return response.json();\r\n        },\r\n        async getriderlat(id){\r\n            const response = await fetch('https://safe-river-16409.herokuapp.com/api/getriderlat?id='+id);\r\n            return response.json();\r\n        },\r\n        async getriderlong(id){\r\n            const response = await fetch('https://safe-river-16409.herokuapp.com/api/getriderlong?id='+id);\r\n            return response.json();\r\n        },\r\n        work(value){\r\n            console.log(value.location)\r\n            this.pickuploc.setLatLng([value.location.y,value.location.x])\r\n        },\r\n        updatePoly(oldLatLng){\r\n            this.thert.remove()\r\n            this.thert=L.polygon([\r\n                [this.pickuplat, this.pickuplong],\r\n                [oldLatLng.latlng.lat, oldLatLng.latlng.lng]\r\n            ]).addTo(this.map);\r\n        },\r\n        conpick(){\r\n            this.pickuploc.on('move',this.confirm2)\r\n            this.pickuplat=this.pickuploc.getLatLng().lat\r\n            this.pickuplong=this.pickuploc.getLatLng().lng\r\n            this.thert=L.polygon([\r\n                [this.pickuplat, this.pickuplong],\r\n                [this.pickuplat, this.pickuplong+0.003]\r\n            ]).addTo(this.map);\r\n            this.reqpickuploc=L.circle([this.pickuplat, this.pickuplong], {\r\n                color: 'green',\r\n                fillColor: 'green',\r\n                fillOpacity: 0.5,\r\n                radius: 25,\r\n            }).addTo(this.map);\r\n            //console.log(this.pickuploc.getLatLng().lat)\r\n            this.pickuploc.setLatLng([this.pickuplat,this.pickuplong+0.003])\r\n            this.pickuploc.on('move',this.updatePoly)\r\n            this.thepopup.setLatLng([this.pickuplat+(0.003/(this.map.getZoom()**9))*(13**9),this.pickuplong+0.003])\r\n            var container = L.DomUtil.create('div')\r\n            var btn = L.DomUtil.create('button', '', container);\r\n            var btn2 = L.DomUtil.create('button', '', container);\r\n            btn.setAttribute('type', 'button');\r\n            btn2.setAttribute('type', 'button');\r\n            btn.innerHTML = 'confirm dropoff';\r\n            btn2.innerHTML = 'cancel';\r\n            L.DomEvent.on(btn, 'click', async () => {\r\n                await this.condrop()\r\n            });\r\n            L.DomEvent.on(btn2, 'click', () => {\r\n                this.reqpickuploc.remove()\r\n                this.thert.remove()\r\n                this.pickuploc.remove()\r\n                this.otherreqstatus=false\r\n                this.thepopup.remove()\r\n            });\r\n            var newDiv = document.createElement(\"div\");\r\n            newDiv.appendChild(btn);\r\n            newDiv.appendChild(btn2);\r\n            this.thepopup.setContent(newDiv)\r\n            this.thepopup.openOn(this.map)\r\n        },\r\n        async condrop(){\r\n            if(this.theuserid==undefined&&this.loggedin2==false){\r\n                window.location.assign(\"https://safe-river-16409.herokuapp.com/api/auth/login\")\r\n                this.loggedin2=true\r\n                const theuserid = await this.use();\r\n                this.theuserid=theuserid.id\r\n                await this.condrop()\r\n            }\r\n            else if(this.theuserid==undefined&&this.loggedin2==true){\r\n                const theuserid = await this.use();\r\n                this.theuserid=theuserid.id\r\n                console.log(this.theuserid)\r\n                await this.condrop()\r\n            }\r\n            else{\r\n                this.givingans=await this.getgive()\r\n                if(this.givingans.requested==undefined){\r\n                    this.requested=false\r\n                }\r\n                else if(this.givingans.requested=='False'){\r\n                    this.requested=false\r\n                }\r\n                else{\r\n                    this.requested=true\r\n                }\r\n                if(this.requested==false){\r\n                    await fetch('https://safe-river-16409.herokuapp.com/api/changerequested',{ credentials: 'include'})\r\n                    this.reqdropoffloc=L.circle([this.pickuploc.getLatLng().lat, this.pickuploc.getLatLng().lng], {\r\n                        color: 'red',\r\n                        fillColor: 'red',\r\n                        fillOpacity: 0.5,\r\n                        radius: 25,\r\n                    }).addTo(this.map);\r\n                    this.thepopup.remove()\r\n                    this.pickuploc.remove()\r\n                    this.reqstatus='cancel request (5 mile penalty)'\r\n                    this.requested=true\r\n                    this.otherreqstatus=false\r\n                    this.oldscore=await this.getscore()\r\n                    await fetch('https://safe-river-16409.herokuapp.com/api/sendride?requestedpickuplat='+this.pickuplat+'&requestedpickuplong='+this.pickuplong+'&requesteddropofflat='+this.pickuploc.getLatLng().lat+'&requesteddropofflong='+this.pickuploc.getLatLng().lng,{ credentials: 'include'})\r\n                    await this.checkriderdest(this.oldscore)\r\n                }\r\n                else{\r\n                    alert('You have already requested a ride')\r\n                }\r\n            }\r\n        },\r\n        async waitfordriver(oldscore){\r\n            this.score=await this.getscore()\r\n            if(this.score==oldscore){\r\n                await this.waitfordriver(oldscore)\r\n            }\r\n            else{\r\n                console.log('success')\r\n            }\r\n        },\r\n        async getscore(){\r\n            const response=await fetch('https://safe-river-16409.herokuapp.com/api/grabscore',{ credentials: 'include'})\r\n            return response.json()\r\n        },\r\n        async checkriderdest(oldscore){\r\n            this.lat=await this.allLinks.getnewlat(this.theuserid);\r\n            this.long=await this.allLinks.getnewlng(this.theuserid);\r\n            this.userposition.setLatLng([this.lat,this.long])\r\n            this.score=await this.getscore()\r\n            //this.let=lat\r\n            //this.long=long\r\n            const dist=((this.requesteddropofflat-this.lat)**2+(this.requesteddropofflong-this.long)**2)**0.5\r\n            if(dist<0.003){\r\n                this.requested=false\r\n                await fetch('https://safe-river-16409.herokuapp.com/api/changerequestedfalse',{ credentials: 'include'})\r\n                if(this.score==oldscore){\r\n                    await this.waitfordriver(oldscore)\r\n                }\r\n            }\r\n            else{\r\n                await this.checkriderdest()\r\n            }\r\n        },\r\n        async acgiveride(n,name,rplat,rplong,rdlat,rdlong){\r\n            this.lat=await this.allLinks.getnewlat(this.theuserid);\r\n            this.long=await this.allLinks.getnewlng(this.theuserid);\r\n            const dist=((rplat-this.lat)**2+(rplong-this.long)**2)**0.5\r\n            const distmiles1=(((rplat-this.lat)*69.172)**2+((rplong-this.long)*(Math.cos(((rplat-this.lat)/2)*(Math.PI/180)))*69.172)**2)**0.5\r\n            this.thegiveridepopups[n].setContent('Go to'+name+'('+distmiles1+'miles away)')\r\n            if(dist<0.003){\r\n                this.enroute=true\r\n                const distmiles=(((rplat-rdlat)*69.172)**2+((rplong-rdlong)*(Math.cos(((rplat-rdlat)/2)*(Math.PI/180)))*69.172)**2)**0.5\r\n                this.cost=distmiles\r\n                this.thegiveridepopups[n].setContent('Drive'+name+'to the destination('+distmiles+'miles away)')\r\n                await this.checkdest(n,name,rdlat,rdlong)\r\n            }\r\n            else{\r\n                await this.acgiveride(n,name,rplat,rplong,rdlat,rdlong)\r\n            }\r\n        },\r\n        async getgive(){\r\n            const response=await fetch('https://safe-river-16409.herokuapp.com/api/getusergive',{ credentials: 'include'})\r\n            return response.json()\r\n        },\r\n        async beforeacgiveride(n,name,rplat,rplong,rdlat,rdlong){\r\n            const theuserid = await this.use();\r\n            this.theuserid=theuserid.id\r\n            if(this.theuserid==undefined&&this.loggedin==false){\r\n                window.location.assign(\"https://safe-river-16409.herokuapp.com/api/auth/login\")\r\n                this.loggedin=true\r\n                await this.beforeacgiveride(n,name,rplat,rplong,rdlat,rdlong)\r\n            }\r\n            else if(this.theuserid==undefined&&this.loggedin==true){\r\n                const theuserid = await this.use();\r\n                this.theuserid=theuserid.id\r\n                await this.beforeacgiveride(n,name,rplat,rplong,rdlat,rdlong)\r\n            }\r\n            else{\r\n                this.givingans=await this.getgive()\r\n                if(this.givingans.giving==undefined){\r\n                    this.giving=false\r\n                }\r\n                else if(this.givingans.giving=='False'){\r\n                    this.giving=false\r\n                }\r\n                else{\r\n                    this.giving=true\r\n                }\r\n                console.log(this.giving)\r\n                if(this.givingans.requested==undefined){\r\n                    this.requested=false\r\n                }\r\n                else if(this.givingans.requested=='False'){\r\n                    this.requested=false\r\n                }\r\n                else{\r\n                    this.requested=true\r\n                }\r\n                if(this.giving==false&&this.requested==false){\r\n                    this.giving=true\r\n                    await fetch('https://safe-river-16409.herokuapp.com/api/changegive',{ credentials: 'include'})\r\n                    await this.acgiveride(n,name,rplat,rplong,rdlat,rdlong)\r\n                }\r\n                else if(this.giving==true&&this.requested==false){\r\n                    L.DomEvent.on(this.okbtns[n], 'click', () => {\r\n                        this.goback(n)\r\n                    });\r\n                    var newDiv = document.createElement(\"div\");\r\n                    var newContent = document.createTextNode(\"Error: you must complete your current ride first.\");\r\n                    newDiv.appendChild(newContent);\r\n                    newDiv.appendChild(this.okbtns[n]);\r\n                    this.thegiveridepopups[n].setContent(newDiv)\r\n                }\r\n                else{\r\n                    L.DomEvent.on(this.okbtns[n], 'click', () => {\r\n                        this.goback(n)\r\n                    });\r\n                    var newwDiv = document.createElement(\"div\");\r\n                    var newwContent = document.createTextNode(\"Error: you must cancel your current ride request or complete it in order to give a ride.\");\r\n                    newwDiv.appendChild(newwContent);\r\n                    newwDiv.appendChild(this.okbtns[n]);\r\n                    this.thegiveridepopups[n].setContent(newwDiv)\r\n                }\r\n            }\r\n        },\r\n        async giveride(n,val,name,rplat,rplong,rdlat,rdlong){\r\n            this.riderid=val\r\n            L.DomEvent.on(this.yesbtns[n], 'click', () => {\r\n                this.beforeacgiveride(n,name,rplat,rplong,rdlat,rdlong)\r\n            });\r\n            L.DomEvent.on(this.nobtns[n], 'click', () => {\r\n                this.goback(n)\r\n            });\r\n            var newDiv = document.createElement(\"div\");\r\n            var newContent = document.createTextNode(\"Are your sure? Other users can tell if you failed to complete this ride.\");\r\n            newDiv.appendChild(newContent);\r\n            newDiv.appendChild(this.yesbtns[n]);\r\n            newDiv.appendChild(this.nobtns[n]);\r\n            this.thegiveridepopups[n].setContent(newDiv)\r\n        },\r\n        async checkdest(n,val,rdlat,rdlong){\r\n            const riderlat=await this.getriderlat(this.riderid);\r\n            const riderlong=await this.getriderlong(this.riderid);\r\n            this.lat=await this.allLinks.getnewlat(this.theuserid);\r\n            this.long=await this.allLinks.getnewlng(this.theuserid);\r\n            this.userposition.setLatLng([this.lat,this.long])\r\n            const dist=((riderlat-rdlat)**2+(riderlong-rdlong)**2)**0.5\r\n            const distmiles=(((riderlat-rdlat)*69.172)**2+((riderlong-rdlong)*(Math.cos(((riderlat-rdlat)/2)*(Math.PI/180)))*69.172)**2)**0.5\r\n            if(dist<0.003){\r\n                this.giving=false\r\n                await fetch('https://safe-river-16409.herokuapp.com/api/changegivefalse',{ credentials: 'include'})\r\n                await fetch('https://safe-river-16409.herokuapp.com/api/finished?cost='+this.cost+'&rider='+this.riderid,{ credentials: 'include'})\r\n                this.score=await this.getscore()\r\n            }\r\n            else{\r\n                this.thegiveridepopups[n].setContent('Drive'+val+'to the destination('+distmiles+'miles away)')\r\n                this.thegiveridepopups[n].setLatLng([riderlat,riderlong])\r\n                await this.checkdest(rdlat,rdlong)\r\n            }\r\n        },\r\n        async use(){\r\n            const response=await fetch('https://safe-river-16409.herokuapp.com/api/user',{ credentials: 'include'})\r\n            return response.json()\r\n        },\r\n        goback(n){\r\n            this.thegiveridepopups[n].setContent(this.thebtns[n])\r\n        },\r\n        confirm(val){\r\n            this.thepopup.setLatLng([val.latlng.lat+(0.003/(this.map.getZoom()**9))*(13**9),val.latlng.lng])\r\n            //this.map.openPopup('<b-button id=\"test\" @click=\"test\">test</b-button>',[val.latlng.lat+0.003,val.latlng.lng],{closeButton: false, closeOnClick: false})\r\n            var container = L.DomUtil.create('div')\r\n            var btn = L.DomUtil.create('button', '', container);\r\n            var btn2 = L.DomUtil.create('button', '', container);\r\n            btn.setAttribute('type', 'button');\r\n            btn2.setAttribute('type', 'button');\r\n            btn.innerHTML = 'confirm pickup';\r\n            btn2.innerHTML = 'cancel';\r\n            L.DomEvent.on(btn, 'click', () => {\r\n                this.conpick()\r\n            });\r\n            L.DomEvent.on(btn2, 'click', () => {\r\n                this.thepopup.remove()\r\n                this.pickuploc.remove()\r\n                this.otherreqstatus=false\r\n            });\r\n            var newDiv = document.createElement(\"div\");\r\n            newDiv.appendChild(btn);\r\n            newDiv.appendChild(btn2);\r\n            this.thepopup.setContent(newDiv)\r\n            this.thepopup.openOn(this.map)\r\n        },\r\n        confirm2(val){\r\n            this.thepopup.setLatLng([val.latlng.lat+(0.003/(this.map.getZoom()**9))*(13**9),val.latlng.lng])\r\n            //this.map.openPopup('<b-button id=\"test\" @click=\"test\">test</b-button>',[val.latlng.lat+0.003,val.latlng.lng],{closeButton: false, closeOnClick: false})\r\n            var container = L.DomUtil.create('div')\r\n            var btn = L.DomUtil.create('button', '', container);\r\n            var btn2 = L.DomUtil.create('button', '', container);\r\n            btn.setAttribute('type', 'button');\r\n            btn2.setAttribute('type', 'button');\r\n            btn.innerHTML = 'confirm dropoff';\r\n            btn2.innerHTML = 'cancel';\r\n            L.DomEvent.on(btn, 'click', async () => {\r\n                await this.condrop()\r\n            });\r\n            L.DomEvent.on(btn2, 'click', () => {\r\n                this.reqpickuploc.remove()\r\n                this.thert.remove()\r\n                this.thepopup.remove()\r\n                this.pickuploc.remove()\r\n                this.otherreqstatus=false\r\n            });\r\n            var newDiv = document.createElement(\"div\");\r\n            newDiv.appendChild(btn);\r\n            newDiv.appendChild(btn2);\r\n            this.thepopup.setContent(newDiv)\r\n            this.thepopup.openOn(this.map)\r\n        },\r\n        changepop(){\r\n            this.thepopup.setLatLng([this.pickuploc.getLatLng().lat+(0.003/(this.map.getZoom()**9))*(13**9), this.pickuploc.getLatLng().lng])\r\n        },\r\n        async setpickup(){\r\n            if(this.theuserid==undefined){\r\n                this.requested=false\r\n            }\r\n            else{\r\n                this.givingans=await this.getgive()\r\n                console.log(this.givingans.requested)\r\n                if(this.givingans.requested==undefined){\r\n                    this.requested=false\r\n                }\r\n                else if(this.givingans.requested=='False'){\r\n                    this.requested=false\r\n                }\r\n                else{\r\n                    this.requested=true\r\n                }\r\n            } \r\n            if(this.requested==false&&this.otherreqstatus==false){\r\n                this.otherreqstatus=true\r\n                let pinIcon = L.icon({\r\n                    iconUrl: image,\r\n                    iconSize: [20,20],\r\n                    iconAnchor: [10.5,20]\r\n                });\r\n                this.pickuploc = L.marker([this.lat, this.long], {\r\n                    icon: pinIcon,\r\n                    draggable: 'True'\r\n                }).addTo(this.map);\r\n                this.provider = new OpenStreetMapProvider();\r\n                this.searchControl = new GeoSearchControl({\r\n                    provider: this.provider,\r\n                    showMarker: false\r\n                });\r\n                this.map.addControl(this.searchControl);\r\n                this.map.on('geosearch/showlocation', this.work);\r\n                //this.map.openPopup('<p>test</p>',[this.pickuploc.getLatLng().lat+0.003,this.pickuploc.getLatLng().lng],{closeButton: false, closeOnClick: false})\r\n                this.thepopup=L.popup({closeButton:false,closeOnClick:false});\r\n                this.thepopup.setLatLng([this.lat+(0.003/(this.map.getZoom()**9))*(13**9), this.long])\r\n                this.map.on('zoomend',this.changepop)\r\n                //this.map.openPopup('<b-button id=\"test\" @click=\"test\">test</b-button>',[val.latlng.lat+0.003,val.latlng.lng],{closeButton: false, closeOnClick: false})\r\n                var container = L.DomUtil.create('div')\r\n                var btn = L.DomUtil.create('button', '', container);\r\n                var btn2 = L.DomUtil.create('button', '', container);\r\n                btn.setAttribute('type', 'button');\r\n                btn2.setAttribute('type', 'button');\r\n                btn.innerHTML = 'confirm pickup';\r\n                btn2.innerHTML = 'cancel';\r\n                L.DomEvent.on(btn, 'click', () => {\r\n                    this.conpick()\r\n                });\r\n                L.DomEvent.on(btn2, 'click', () => {\r\n                    this.pickuploc.remove()\r\n                });\r\n                var newDiv = document.createElement(\"div\");\r\n                newDiv.appendChild(btn);\r\n                newDiv.appendChild(btn2);\r\n                this.thepopup.setContent(newDiv)\r\n                this.thepopup.openOn(this.map)\r\n                this.pickuploc.on('move',this.confirm)\r\n            }\r\n            else if(this.otherreqstatus==true){\r\n                alert('Already requesting, drag pin to set pickup location')\r\n            }\r\n            else{\r\n                this.requested=false\r\n                await fetch('https://safe-river-16409.herokuapp.com/api/changerequestedfalse',{ credentials: 'include'})\r\n                this.reqstatus='request ride'\r\n                this.otherreqstatus=false\r\n                if(this.reqpickuploc!='test'){\r\n                    this.reqpickuploc.remove()\r\n                    this.reqdropoffloc.remove()\r\n                    this.thert.remove()\r\n                }\r\n            }\r\n        },\r\n        async setupmap(){\r\n            this.map = L.map('mapContainer').setView([this.lat, this.long], 13);\r\n            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {\r\n                maxZoom: 18,\r\n                attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, ' +\r\n                    'Imagery  <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n                id: 'mapbox/streets-v11',\r\n                tileSize: 512,\r\n                zoomOffset: -1\r\n            }).addTo(this.map);\r\n            this.userposition = L.circle([this.lat, this.long], {\r\n                color: 'blue',\r\n                fillColor: 'blue',\r\n                fillOpacity: 0.5,\r\n                radius: 25,\r\n            }).addTo(this.map);\r\n            const thedat=await this.getrides()\r\n            var j=0\r\n            //console.log(thedat[0].Location36n79[0])\r\n            for(let i=0;i<Object.values(thedat[0].Location36n79[0]).length;i++){\r\n                this.values=Object.values(thedat[0].Location36n79[0])\r\n                this.inds.push(j)\r\n                //console.log(values[i])\r\n                if(this.values[i][0].requestedpickuplat!=\"\"&&this.values[i][0].requestedpickuplat!=undefined){\r\n                    if(this.values[i][0].name!=this.theuserid){\r\n                        var polygon = L.polygon([\r\n                            [this.values[i][0].requestedpickuplat, this.values[i][0].requestedpickuplong],\r\n                            [this.values[i][0].requesteddropofflat, this.values[i][0].requesteddropofflong]\r\n                        ]).addTo(this.map);\r\n                        //console.log(typeof(values[i][0]))\r\n                        this.thegiveridepopups.push(L.popup({closeButton:false,closeOnClick:false}))\r\n                        //values[i][0].append({ind:j})\r\n                        var container=L.DomUtil.create('div')\r\n                        this.thebtns.push(L.DomUtil.create('button', '', container));\r\n                        this.thebtns[j].setAttribute('type', 'button');\r\n                        this.thebtns[j].innerHTML = 'give ride';\r\n                        L.DomEvent.on(this.thebtns[j], 'click', () => {\r\n                            this.giveride(this.inds[i],this.values[i][0].name,this.values[i][0].acname,this.values[i][0].requestedpickuplat,this.values[i][0].requestedpickuplong,this.values[i][0].requesteddropofflat,this.values[i][0].requesteddropofflong)\r\n                        });\r\n                        this.yesbtns.push(L.DomUtil.create('button', '', container));\r\n                        this.yesbtns[j].setAttribute('type', 'button');\r\n                        this.yesbtns[j].innerHTML = 'Yes';\r\n                        this.nobtns.push(L.DomUtil.create('button', '', container));\r\n                        this.nobtns[j].setAttribute('type', 'button');\r\n                        this.nobtns[j].innerHTML = 'No';\r\n                        this.okbtns.push(L.DomUtil.create('button', '', container));\r\n                        this.okbtns[j].setAttribute('type', 'button');\r\n                        this.okbtns[j].innerHTML = 'OK';\r\n                        this.thegiveridepopups[j].setContent(this.thebtns[j])\r\n                        polygon.bindPopup(this.thegiveridepopups[j]);\r\n                        let circle = L.circle([this.values[i][0].requestedpickuplat, this.values[i][0].requestedpickuplong], {\r\n                            color: 'blue',\r\n                            fillColor: 'blue',\r\n                            fillOpacity: 0.5,\r\n                            radius: 25,\r\n                        }).addTo(this.map);\r\n                        circle.bindPopup(this.thegiveridepopups[j])\r\n                        let circle2 = L.circle([this.values[i][0].requesteddropofflat, this.values[i][0].requesteddropofflong], {\r\n                            color: 'red',\r\n                            fillColor: 'red',\r\n                            fillOpacity: 0.5,\r\n                            radius: 25,\r\n                        }).addTo(this.map);\r\n                        circle2.bindPopup(this.thegiveridepopups[j])\r\n                        j+=1\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        addLink (newLink) {\r\n            console.log(`EVENT: add new item ${newLink.name} to ${this.linkGroup.title}`);\r\n            this.$emit('new-link', this.groupId, newLink);\r\n            // may also do additional work related to logging, interactivity, or other tracking changes\r\n        }\r\n    },\r\n    async mounted () {\r\n        const theuserid=await this.use()\r\n        this.theuserid=theuserid.id\r\n        console.log(this.theuserid)\r\n        const newlat=await this.allLinks.getnewlat(this.theuserid);\r\n        const newlng=await this.allLinks.getnewlng(this.theuserid);\r\n        this.lat=newlat\r\n        this.long=newlng\r\n        this.setupmap();\r\n        this.isloading=''\r\n        if(this.theuserid!=undefined){\r\n            this.givingans=await this.getgive()\r\n            this.score=await this.getscore()\r\n            if(this.givingans.requested=='True'){\r\n                this.reqstatus='Cancel request (5 mile penalty)'\r\n                this.requested=true\r\n                this.reqpickuploc=L.circle([this.givingans.requestedpickuplat, this.givingans.requestedpickuplong], {\r\n                    color: 'green',\r\n                    fillColor: 'green',\r\n                    fillOpacity: 0.5,\r\n                    radius: 25,\r\n                }).addTo(this.map);\r\n                this.thert=L.polygon([\r\n                    [this.givingans.requestedpickuplat, this.givingans.requestedpickuplong],\r\n                    [this.givingans.requesteddropofflat, this.givingans.requesteddropofflong]\r\n                ]).addTo(this.map);\r\n                this.reqdropoffloc=L.circle([this.givingans.requesteddropofflat, this.givingans.requesteddropofflong], {\r\n                    color: 'red',\r\n                    fillColor: 'red',\r\n                    fillOpacity: 0.5,\r\n                    radius: 25,\r\n                }).addTo(this.map);\r\n                await this.checkriderdest()\r\n            }\r\n            else{\r\n                this.requested=false\r\n            }\r\n            if(this.givingans.giving=='True'){\r\n                this.giving==true\r\n                await this.checkdest()\r\n            }\r\n            else{\r\n                this.giving=false\r\n            }\r\n        }\r\n        //const newlng=await this.allLinks.getlong();\r\n        /*\r\n        var thelat=0\r\n        var thelong=0\r\n        console.log(999)\r\n        function success(position) {\r\n            thelat=position.coords.latitude;\r\n            thelong=position.coords.longitude;\r\n        }\r\n        \r\n        function error() {\r\n            console.log('Unable to retrieve your location');\r\n        }\r\n        \r\n        if(!navigator.geolocation) {\r\n            console.log('Geolocation is not supported by your browser');\r\n        } else {\r\n            navigator.geolocation.getCurrentPosition(success, error);\r\n        }\r\n        const mymap = L.map('mapid').setView([thelat, thelong], 13);\r\n        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {\r\n            maxZoom: 18,\r\n            attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, ' +\r\n                'Imagery  <a href=\"https://www.mapbox.com/\">Mapbox</a>',\r\n            id: 'mapbox/streets-v11',\r\n            tileSize: 512,\r\n            zoomOffset: -1\r\n        }).addTo(mymap);\r\n        for(let i=1;i<this.allLinks.data.length;i++){\r\n            var polygon = L.polygon([\r\n            [this.allLinks.data[i].requestedpickuplat, this.allLinks.data.users[i].requestedpickuplong],\r\n            [this.allLinks.data[i].requesteddropofflat, this.allLinks.data.users[i].requesteddropofflong]\r\n            ]).addTo(mymap);\r\n            polygon.bindPopup('<h4>'+this.allLinks.data[i].name+'</h4>').openPopup();\r\n            let circle = L.circle([this.allLinks.data[i].requestedpickuplat, this.allLinks.data[i].requestedpickuplong], {\r\n                color: 'blue',\r\n                fillColor: 'blue',\r\n                fillOpacity: 0.5,\r\n                radius: 25,\r\n            }).addTo(mymap);\r\n            circle.bindPopup('<h4>'+this.allLinks.data[i].name+'</h4>').openPopup();\r\n            let circle2 = L.circle([this.allLinks.data[i].requesteddropofflat, this.allLinks.data[i].requesteddropofflong], {\r\n                color: 'red',\r\n                fillColor: 'red',\r\n                fillOpacity: 0.5,\r\n                radius: 25,\r\n            }).addTo(mymap);\r\n            circle2.bindPopup('<h4>'+this.allLinks.data[i].name+'</h4>').openPopup();\r\n        }\r\n        */\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n#mapContainer {\r\n width: 80vw;\r\n height: 100vh;\r\n}\r\n#request {\r\n    position: absolute;\r\n    bottom: 370px;\r\n    width: 10%;\r\n    z-index: 9999;\r\n}\r\n</style>"]}]}